record(bo, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_RESET")
{
    field(DESC, "Reset interlock sequencer")
    field(ZNAM, "Done")
    field(ONAM, "Reset")
    field(SCAN, "Passive")
}

record(mbbo, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_STATUS")
{
    field(DESC, "Interlock Sequencer Status")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(THVL, "3")
    field(FRVL, "4")
    field(ZRST, "OK")
    field(ONST, "Fault")
    field(TWST, "Recover")
    field(THST, "Ramp")
    field(FRST, "Restore triggers")
    field(ONSV, "MAJOR")
    field(TWSV, "MINOR")
    field(THSV, "MINOR")
    field(FRSV, "MINOR")
    field(SCAN, "Passive")
    info(autosaveFields, "VAL")
}

record(mbbo, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_MODE")
{
    field(DESC, "Interlock Sequencer Mode")
    field(ZRVL, "0")
    field(ONVL, "1")
    field(TWVL, "2")
    field(ZRST, "Manual")
    field(ONST, "Automatic")
    field(TWST, "Bypass")
    field(SCAN, "Passive")
    field(TWSV, "MINOR")
    info(autosaveFields, "VAL")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_RAMPTIME")
{
    field(DESC, "time period for Ramping")
    field(PREC, "1")
    field(EGU,  "s")
    field(SCAN, "Passive")
    field(HHSV, "MAJOR")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(LLSV, "MAJOR")
    info(autosaveFields, "VAL LOLO LOW HIGH HIHI")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_CLEARFAULT_DELAY")
{
    field(DESC, "time delay before fault clear")
    field(PREC, "1")
    field(EGU,  "s")
    field(SCAN, "Passive")
    field(VAL,  "3")
    field(DRVL, "0.1")
    field(DRVH, "60")
    field(LOPR, "0.1")
    field(HOPR, "60")
    field(HHSV, "MAJOR")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(LLSV, "MAJOR")
    info(autosaveFields, "VAL LOLO LOW HIGH HIHI")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_FDBK_TIMEOUT")
{
    field(DESC, "time for phase feedback to recover")
    field(PREC, "1")
    field(EGU,  "s")
    field(SCAN, "Passive")
    field(VAL,  "10")
    field(DRVL, "0.1")
    field(DRVH, "60")
    field(LOPR, "0.1")
    field(HOPR, "60")
    field(HHSV, "MAJOR")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(LLSV, "MAJOR")
    info(autosaveFields, "VAL LOLO LOW HIGH HIHI")
}

record(bo, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_MOVE_TRIG")
{
    field(DESC, "Move triggers to standby during fault")
    field(ZNAM, "Disable")
    field(ONAM, "Enable")
    field(VAL,  "1")
    info(autosaveFields, "VAL ZSV OSV")
}

record(bo, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_MOVE_FDBK")
{
    field(DESC, "Override feedback during fault")
    field(ZNAM, "Disable")
    field(ONAM, "Enable")
    field(VAL,  "1")
    info(autosaveFields, "VAL ZSV OSV")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):BCUR_FLT_DELAY")
{
    field(DESC, "time delay before beamcurrent fault")
    field(PREC, "1")
    field(EGU,  "s")
    field(SCAN, "Passive")
    field(VAL,  "3")
    field(DRVL, "0.1")
    field(DRVH, "60")
    field(LOPR, "0.1")
    field(HOPR, "60")
    field(HHSV, "MAJOR")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(LLSV, "MAJOR")
    info(autosaveFields, "VAL LOLO LOW HIGH HIHI")
}

record(bi, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):BCUR_FLT")
{
    field(DESC, "Beamcurrent too low")
    field(ZNAM, "OK")
    field(ONAM, "Fault")
    field(OSV, "MAJOR")
    info(autosaveFields, "VAL")
}

record(bi, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_TRIG_MOVED")
{
    field(DESC, "Seq moved triggers to STDBY")
    field(PINI, "YES")
    field(ZNAM, "No")
    field(ONAM, "Yes")
}

record(calcout, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_TRIG_MOVED_RESET")
{
    field(DESC, "Clear FAULTSEQ_TRIG_MOVED")
    field(INPA, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):TRIGMODE CP")
    field(CALC, "0")
    field(OUT,  "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_TRIG_MOVED PP")
    field(ASG,  "Internal")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_RAMP_STEP")
{
    field(DESC, "Ramp step size")
    field(PREC, "1")
    field(EGU,  "%")
    field(DRVL, "0")
    field(DRVH, "100")
    field(SCAN, "Passive")
    field(VAL,  "0.3")
    info(autosaveFields, "VAL DRVL DRVH EGU")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_ADES_FACTOR")
{
    field(DESC, "Factor of ADES for the fast ramp")
    field(PREC, "1")
    field(EGU,  "%")
    field(DRVL, "0")
    field(DRVH, "100")
    field(SCAN, "Passive")
    field(VAL,  "90")
    info(autosaveFields, "VAL DRVL DRVH")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_RAMP_STEP_FACTOR")
{
    field(DESC, "Step size factor for the slow ramp")
    field(PREC, "1")
    field(EGU,  "%")
    field(DRVL, "0")
    field(DRVH, "100")
    field(SCAN, "Passive")
    field(VAL,  "10")
    info(autosaveFields, "VAL DRVL DRVH")
}

record(ao, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_AMET")
{
    field(DESC, "Amplitude tolerance during ramping")
    field(PREC, "1")
    field(EGU,  "%")
    field(DRVL, "0")
    field(DRVH, "100")
    field(SCAN, "Passive")
    field(VAL,  "5")
    info(autosaveFields, "VAL DRVL DRVH EGU")
}

record(ai, "$(DEV=$(PRIMARY):$(MICRO):$(UNIT)):FAULTSEQ_ADES")
{
    field(PINI, "YES")
    field(DESC, "ADES target for the fault sequencer")
    field(SCAN, "Passive")
    field(PREC, "2")
    info(autosaveFields, "VAL LOLO LOW HIGH HIHI HHSV HSV LSV LLSV EGU PREC")
}
